webpackJsonp([108,113],{1155:function(t,s){t.exports={content:'<style>.transformer-react-render{border:1px dashed #959da5;border-radius:5px;display:block}.transformer-react-render-container>pre{max-height:400px;transition:all .2s ease}.transformer-react-render-container>pre.focused{max-height:none;box-shadow:0 0 6px rgba(0,0,0,.2)}</style><blockquote><p>实现侧边内容的动态跳转，非锚点。 点击右侧的文章侧边导航栏，实现动态效果跳转。</p></blockquote><h1 id=怎么实现滴？><a href=#%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E6%BB%B4%EF%BC%9F aria-hidden=true><span class="icon icon-link"></span></a>怎么实现滴？</h1><p>找到hexo文件夹中你选择的主题文件夹，在我这是<code>themes/indigo</code> 进入<code>source/js</code>，修改js文件</p><!-- more --><pre><code class="hljs language-javascript"data-query={} data-lang=javascript><span class=hljs-comment>/*\n * d->document;\n * animate->requestAnimationFrame\n */</span>\n<span class=hljs-keyword>var</span> links = d.querySelectorAll(<span class=hljs-string>\'.post-toc-link\'</span>);\n<span class=hljs-keyword>for</span>(<span class=hljs-keyword>var</span> i = <span class=hljs-number>0</span>;i &lt; links.length;i++){\n\t<span class=hljs-keyword>var</span> link = links.item(i);\n\tlink.addEventListener(<span class=hljs-string>\'click\'</span>,<span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>e</span>)</span>{\n\t\te.preventDefault();\n\t\t<span class=hljs-keyword>var</span> id = <span class=hljs-keyword>this</span>.hash;\n\t\t<span class=hljs-keyword>var</span> tg = d.querySelector(id);\n\t\t<span class=hljs-keyword>var</span> max = d.body.scrollHeight - d.body.offsetHeight,tg_parent_top = tg.offsetParent.offsetTop;\n\t\t<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>scrollToLink</span>(<span class=hljs-params></span>)</span>{\n\t\t\t<span class=hljs-keyword>var</span> to = tg.offsetTop+tg_parent_top - <span class=hljs-number>40</span>,\n\t\t\t\ttop = d.body.scrollTop;\n\t\t\t<span class=hljs-keyword>if</span>(top > to){\n\t\t\t\ttop -= <span class=hljs-number>130</span>;\n\t\t\t\t<span class=hljs-keyword>if</span>(top &lt; to){\n\t\t\t\t\td.body.scrollTop = to;\n\t\t\t\t\t<span class=hljs-keyword>return</span>;\n\t\t\t\t}\n\t\t\t\td.body.scrollTop = top;\n\t\t\t\tanimate(<span class=hljs-built_in>arguments</span>.callee);\n\t\t\t}\n\t\t\t<span class=hljs-keyword>else</span> <span class=hljs-keyword>if</span>(top &lt; to){\n\t\t\t\t<span class=hljs-keyword>if</span>(top==max){\n\t\t\t\t\td.body.scrollTop = to;\n\t\t\t\t\t<span class=hljs-keyword>return</span>;\n\t\t\t\t}\n\t\t\t\ttop += <span class=hljs-number>130</span>;\n\t\t\t\t<span class=hljs-keyword>if</span>(top > to){\n\t\t\t\t\td.body.scrollTop = to;\n\t\t\t\t\t<span class=hljs-keyword>return</span>;\n\t\t\t\t}\n\t\t\t\td.body.scrollTop = top;\n\t\t\t\tanimate(<span class=hljs-built_in>arguments</span>.callee);\n\t\t\t}\t\n\t\t}\n\t\tanimate(scrollToLink);\n\t})\n};</code></pre><p>经过这个小Demo，我发现一个小知识点</p><blockquote><p><strong><em>元素的offsetTop对相对于其设置了position属性的祖宗元素（若无则为body）。</em></strong></p></blockquote><p>不信？！请看下面的测试</p><h1 id=我是第一！><a href=#%E6%88%91%E6%98%AF%E7%AC%AC%E4%B8%80%EF%BC%81 aria-hidden=true><span class="icon icon-link"></span></a>我是第一！</h1><div style="position:relative;height:700px;border:2px dotted #00f"><p>第一的内容！ `position:relative; height:700px; `</p><div><script>function alertAttr(t,r){alert(t[r])}</script><button onclick=alertAttr(this,"offsetTop")>点击看我的offsetTop</button></div><p></p></div><h1 id=我是第二！><a href=#%E6%88%91%E6%98%AF%E7%AC%AC%E4%BA%8C%EF%BC%81 aria-hidden=true><span class="icon icon-link"></span></a>我是第二！</h1><div style="height:800px;border:2px dotted red"><p>第二的内容！ ` height:800px; `</p><button onclick=alertAttr(this,"offsetTop")>点击看我的offsetTop</button></div><h1 id=我是第三！><a href=#%E6%88%91%E6%98%AF%E7%AC%AC%E4%B8%89%EF%BC%81 aria-hidden=true><span class="icon icon-link"></span></a>我是第三！</h1><div style="height:500px;border:2px dotted green"><p>第三的内容！ ` height:500px; `</p></div><br>> 更多的细节还可以看元素的`offsetParent`属性',extra:{"_image-loader_":[],_progressive_:[]}}}});
//# sourceMappingURL=animation-of-my-blog-navbar.js.map