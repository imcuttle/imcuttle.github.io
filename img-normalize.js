webpackJsonp([56,90],{1007:function(s,a){s.exports={content:'<h1 id="介绍"><a href="#%E4%BB%8B%E7%BB%8D" aria-hidden="true"><span class="icon icon-link"></span></a>介绍</h1>\n<p>直方图均衡化：我们把一张图片对应的rgb像素点分成3个(对应rgb)256(0-255)等级，并且将等级绘制为直方图，我们把直方图变得分布均匀，这就是直方图均衡化。\n<img src="http://img.my.csdn.net/uploads/201112/9/0_1323437843KrRS.gif" alt="img" width="560" height="420" />\n这样的图片往往具有高对比度，我使用js语言实现了该算法。</p>\n<!--more-->\n<h1 id="代码解释"><a href="#%E4%BB%A3%E7%A0%81%E8%A7%A3%E9%87%8A" aria-hidden="true"><span class="icon icon-link"></span></a>代码解释</h1>\n<pre><code class="hljs language-javascript" data-query="{}" data-lang="javascript">    average: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">imgData</span>) </span>{\n        <span class="hljs-comment">// imgData : 图片数据</span>\n        <span class="hljs-keyword">var</span> data = imgData.data, w = imgData.width, h = imgData.height;\n        <span class="hljs-keyword">var</span> histogramR = [],\n            histogramG = [],\n            histogramB = [];\n        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&#x3C;data.length; i+=<span class="hljs-number">4</span>){\n            <span class="hljs-comment">// 统计rgb等级数目</span>\n            histogramR[data[i]] = histogramR[data[i]]+<span class="hljs-number">1</span> || <span class="hljs-number">1</span>;\n            histogramG[data[i+<span class="hljs-number">1</span>]] = histogramG[data[i+<span class="hljs-number">1</span>]]+<span class="hljs-number">1</span> || <span class="hljs-number">1</span>;\n            histogramB[data[i+<span class="hljs-number">2</span>]] = histogramB[data[i+<span class="hljs-number">2</span>]]+<span class="hljs-number">1</span> || <span class="hljs-number">1</span>;\n        }\n        <span class="hljs-comment">//直方图均衡化</span>\n        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRate</span>(<span class="hljs-params">grayHis,total,index</span>) </span>{\n            <span class="hljs-keyword">var</span> s = <span class="hljs-number">0</span>;\n            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&#x3C;index;i++){\n                <span class="hljs-keyword">var</span> v = grayHis[i]||<span class="hljs-number">0</span>;\n                s+=(v/total);\n            }\n            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(s*<span class="hljs-number">255</span>);\n        }\n        <span class="hljs-keyword">var</span> total = w*h,\n            newHisR = [],\n            newHisG = [],\n            newHisB = [];\n        <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&#x3C;<span class="hljs-number">256</span>; i++){<span class="hljs-comment">//直方图均衡化</span>\n            newHisR[i] = getRate(histogramR,total,i);\n            newHisG[i] = getRate(histogramG,total,i);\n            newHisB[i] = getRate(histogramB,total,i);\n        }\n        <span class="hljs-built_in">console</span>.log([histogramR,histogramG,histogramB],[newHisR,newHisG,newHisB]);\n        <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&#x3C;h; i++){\n            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>; j&#x3C;w; j++){\n                <span class="hljs-keyword">var</span> v = (i*w+j)&#x3C;&#x3C;<span class="hljs-number">2</span>;\n                data[v] = newHisR[data[v]];\n                data[v+<span class="hljs-number">1</span>]=newHisG[data[v+<span class="hljs-number">1</span>]];\n                data[v+<span class="hljs-number">1</span>]=newHisB[data[v+<span class="hljs-number">2</span>]];\n            }\n        }\n        <span class="hljs-keyword">return</span> imgData;\n    }</code></pre>\n<p>查看控制台，左边为原图局部数据，右边为执行算法后的数据，明显后者分布更加平稳。\n<img src="/images/aver1.png" alt="img" width="1019" height="949" /></p>\n<p>直观的感觉如下\n<img src="/images/aver2.png" alt="img" width="647" height="308" /></p>\n<h1 id="参考资料"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" aria-hidden="true"><span class="icon icon-link"></span></a>参考资料</h1>\n<ul>\n<li><a href="http://blog.csdn.net/jia20003/article/details/8119563">http://blog.csdn.net/jia20003/article/details/8119563</a></li>\n<li><a href="http://hello-wangfeng.iteye.com/blog/1717150">http://hello-wangfeng.iteye.com/blog/1717150</a></li>\n</ul>\n',extra:{}}}});