<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/favicon.png" />
    <title> 「项目拾遗」简单图形处理及图形绘制 - Grass </title>
    <link rel="stylesheet" href="/style.css">
    <style>
        #music {
            position: fixed;
            top: 10px;
            left: 10px;
        }
    </style>
</head>
<body>
<div id="root">
    <div class="wrap" data-reactroot="" data-reactid="1" data-react-checksum="-1869894297"><header data-reactid="2"><a class="logo-link" href="/" data-reactid="3"><img src="/favicon.png" data-reactid="4"/></a><ul class="nav nav-list" data-reactid="5"><li class="nav-list-item" data-reactid="6"><a class="nav-list-link" href="/posts/1" data-reactid="7">Posts</a></li></ul></header><main data-reactid="8"><div class="post" data-reactid="9"><article class="post-block" data-reactid="10"><h1 class="post-title" data-reactid="11">「项目拾遗」简单图形处理及图形绘制</h1><div class="post-info" data-reactid="12"><time datetime="2016-06-03T16:11:37+00:00" data-reactid="13">Jun 3, 2016 4:11 PM</time></div></article><div class="post-content" data-reactid="14"><article data-reactid="15"><style data-reactid="16">.transformer-react-render{border:1px dashed #959da5;border-radius:5px;display:block}.transformer-react-render-container&gt;pre{max-height:400px;transition:all .2s ease}.transformer-react-render-container&gt;pre.focused{max-height:none;box-shadow:0 0 6px rgba(0,0,0,.2)}</style><h1 id="引言" data-reactid="17"><a href="#%E5%BC%95%E8%A8%80" aria-hidden="true" data-reactid="18"><span class="icon icon-link" data-reactid="19"></span></a><!-- react-text: 20 -->引言<!-- /react-text --></h1><p data-reactid="21"><!-- react-text: 22 -->这个学期，我学习了图像处理的相关课程，对图像有了初步的认识，并且利用web知识，做了相关实践。<!-- /react-text --><br data-reactid="23"/><!-- react-text: 24 -->在线地址：<!-- /react-text --><a href="http://moyuyc.github.io/htm/painter/" data-reactid="25">moyuyc.github.io/htm/painter/</a><br data-reactid="26"/><strong data-reactid="27">姓名：余聪</strong><br data-reactid="28"/><strong data-reactid="29">学号：19130126</strong></p><h1 id="实现技术说明" data-reactid="30"><a href="#%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF%E8%AF%B4%E6%98%8E" aria-hidden="true" data-reactid="31"><span class="icon icon-link" data-reactid="32"></span></a><!-- react-text: 33 -->实现技术说明<!-- /react-text --></h1><p data-reactid="34"><!-- react-text: 35 -->使用了前端HTML5 canvas API 以及后端Java Web搭建的后台服务。<!-- /react-text --><br data-reactid="36"/><!-- react-text: 37 -->也就是说，<!-- /react-text --><strong data-reactid="38">图像处理功能既有使用JavaScript语言实现的，也有利用Java语言实现的，但是都将以网页形式展现</strong><br data-reactid="39"/><!-- react-text: 40 -->具体技术说明如下图所示。 <!-- /react-text --><div data-reactid="41"><style data-reactid="42">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:1102px;max-height:1102pxpx;" data-reactid="43"><div class="medium-image-progressive-placeholder" style="padding-bottom:38.294010889292196%;" data-reactid="44"></div><div class="medium-image-progressive" data-reactid="45"><canvas data-reactid="46"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="47"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FtExOgf-UTKT19vx6mmqWfBdqn_h?imageslim" data-reactid="48"/><noscript data-reactid="49"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FtExOgf-UTKT19vx6mmqWfBdqn_h?imageslim" data-reactid="50"/></noscript></div></div></div></p><h1 id="使用说明" data-reactid="51"><a href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" aria-hidden="true" data-reactid="52"><span class="icon icon-link" data-reactid="53"></span></a><!-- react-text: 54 -->使用说明<!-- /react-text --></h1><ol data-reactid="55"><li data-reactid="56"><!-- react-text: 57 -->Image Choose <!-- /react-text --><div data-reactid="58"><style data-reactid="59">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:1185px;max-height:1185pxpx;" data-reactid="60"><div class="medium-image-progressive-placeholder" style="padding-bottom:69.53586497890295%;" data-reactid="61"></div><div class="medium-image-progressive" data-reactid="62"><canvas data-reactid="63"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="64"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FtJDetUzRzzIBewtLi0y718y0_oH?imageslim" data-reactid="65"/><noscript data-reactid="66"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FtJDetUzRzzIBewtLi0y718y0_oH?imageslim" data-reactid="67"/></noscript></div></div></div></li><li data-reactid="68"><!-- react-text: 69 -->点击白色面板，选择图像起点 <!-- /react-text --><div data-reactid="70"><style data-reactid="71">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:1626px;max-height:1626pxpx;" data-reactid="72"><div class="medium-image-progressive-placeholder" style="padding-bottom:54.05904059040591%;" data-reactid="73"></div><div class="medium-image-progressive" data-reactid="74"><canvas data-reactid="75"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="76"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FiHHgSEUm-t3GsBzEz7i5wIaTLwu?imageslim" data-reactid="77"/><noscript data-reactid="78"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FiHHgSEUm-t3GsBzEz7i5wIaTLwu?imageslim" data-reactid="79"/></noscript></div></div></div><!-- react-text: 80 --> 右侧Message出现该图片灰度分布情况<!-- /react-text --></li><li data-reactid="81"><!-- react-text: 82 -->操作面板解释 <!-- /react-text --><div data-reactid="83"><style data-reactid="84">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:1162px;max-height:1162pxpx;" data-reactid="85"><div class="medium-image-progressive-placeholder" style="padding-bottom:20.309810671256454%;" data-reactid="86"></div><div class="medium-image-progressive" data-reactid="87"><canvas data-reactid="88"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="89"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/Fgmb7FlStUCyQzc6RoYRWPYaO8gn?imageslim" data-reactid="90"/><noscript data-reactid="91"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/Fgmb7FlStUCyQzc6RoYRWPYaO8gn?imageslim" data-reactid="92"/></noscript></div></div></div></li><li data-reactid="93"><!-- react-text: 94 -->注意 <!-- /react-text --><strong data-reactid="95">对于Server操作，由于需要将图像传输给服务器，所以对于图像大小有要求，请使用下面的图片(较小)进行测试</strong><!-- react-text: 96 --> <!-- /react-text --><div data-reactid="97"><style data-reactid="98">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:256px;max-height:256pxpx;" data-reactid="99"><div class="medium-image-progressive-placeholder" style="padding-bottom:100%;" data-reactid="100"></div><div class="medium-image-progressive" data-reactid="101"><canvas data-reactid="102"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="103"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FuZpYAjB3V5XaFc-tKjpG0T2vzZR?imageslim" data-reactid="104"/><noscript data-reactid="105"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FuZpYAjB3V5XaFc-tKjpG0T2vzZR?imageslim" data-reactid="106"/></noscript></div></div></div></li></ol><h1 id="功能介绍" data-reactid="107"><a href="#%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D" aria-hidden="true" data-reactid="108"><span class="icon icon-link" data-reactid="109"></span></a><!-- react-text: 110 -->功能介绍<!-- /react-text --></h1><h2 id="设置图像透明度直接像素点操作" data-reactid="111"><a href="#%E8%AE%BE%E7%BD%AE%E5%9B%BE%E5%83%8F%E9%80%8F%E6%98%8E%E5%BA%A6%E7%9B%B4%E6%8E%A5%E5%83%8F%E7%B4%A0%E7%82%B9%E6%93%8D%E4%BD%9C" aria-hidden="true" data-reactid="112"><span class="icon icon-link" data-reactid="113"></span></a><!-- react-text: 114 -->设置图像透明度(直接像素点操作)<!-- /react-text --></h2><ul data-reactid="115"><li data-reactid="116"><!-- react-text: 117 -->如图 <!-- /react-text --><div data-reactid="118"><style data-reactid="119">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:533px;max-height:533pxpx;" data-reactid="120"><div class="medium-image-progressive-placeholder" style="padding-bottom:49.34333958724203%;" data-reactid="121"></div><div class="medium-image-progressive" data-reactid="122"><canvas data-reactid="123"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="124"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FiXgk80RJjYyPQe7ANO4uhAA-mTL?imageslim" data-reactid="125"/><noscript data-reactid="126"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FiXgk80RJjYyPQe7ANO4uhAA-mTL?imageslim" data-reactid="127"/></noscript></div></div></div></li><li data-reactid="128"><p data-reactid="129">代码</p><pre data-reactid="130"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="131"><!-- react-text: 132 -->alphaHandle = <!-- /react-text --><span class="hljs-function" data-reactid="133"><span class="hljs-keyword" data-reactid="134">function</span><!-- react-text: 135 --> (<!-- /react-text --><span class="hljs-params" data-reactid="136"></span><!-- react-text: 137 -->) <!-- /react-text --></span><!-- react-text: 138 -->{
    setImageAlpha = <!-- /react-text --><span class="hljs-function" data-reactid="139"><span class="hljs-keyword" data-reactid="140">function</span><!-- react-text: 141 -->(<!-- /react-text --><span class="hljs-params" data-reactid="142">index,alph</span><!-- react-text: 143 -->)<!-- /react-text --></span><!-- react-text: 144 -->{
        <!-- /react-text --><span class="hljs-keyword" data-reactid="145">if</span><!-- react-text: 146 -->(paint.images &amp;&amp; paint.images.length&gt;index ) {
            <!-- /react-text --><span class="hljs-keyword" data-reactid="147">var</span><!-- react-text: 148 --> image = paint.images[index],
                img = paint.getImageData(image.x,image.y,image.width,image.height);
            <!-- /react-text --><span class="hljs-keyword" data-reactid="149">for</span><!-- react-text: 150 -->(<!-- /react-text --><span class="hljs-keyword" data-reactid="151">var</span><!-- react-text: 152 --> i=<!-- /react-text --><span class="hljs-number" data-reactid="153">0</span><!-- react-text: 154 -->;i&lt;img.data.length;i+=<!-- /react-text --><span class="hljs-number" data-reactid="155">4</span><!-- react-text: 156 -->){
                <!-- /react-text --><span class="hljs-comment" data-reactid="157">// 设置alph</span><!-- react-text: 158 -->
                img.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="159">3</span><!-- react-text: 160 -->] = alph;
            }
            paint.save();
            paint.putImageData(img,image.x,image.y);
            paint.restore();
        }
    };
    <!-- /react-text --><span class="hljs-keyword" data-reactid="161">var</span><!-- react-text: 162 --> alph;
    <!-- /react-text --><span class="hljs-keyword" data-reactid="163">while</span><!-- react-text: 164 -->((alph=<!-- /react-text --><span class="hljs-built_in" data-reactid="165">parseInt</span><!-- react-text: 166 -->(prompt(<!-- /react-text --><span class="hljs-string" data-reactid="167">&#x27;please set images alpha. (0~255)&#x27;</span><!-- react-text: 168 -->,<!-- /react-text --><span class="hljs-number" data-reactid="169">120</span><!-- react-text: 170 -->)))&gt;<!-- /react-text --><span class="hljs-number" data-reactid="171">255</span><!-- react-text: 172 --> || alph&lt;<!-- /react-text --><span class="hljs-number" data-reactid="173">0</span><!-- react-text: 174 -->);
    <!-- /react-text --><span class="hljs-keyword" data-reactid="175">for</span><!-- react-text: 176 -->(<!-- /react-text --><span class="hljs-keyword" data-reactid="177">var</span><!-- react-text: 178 --> i=<!-- /react-text --><span class="hljs-number" data-reactid="179">0</span><!-- react-text: 180 -->;i&lt;paint.images.length;i++)
        setImageAlpha(i,alph);
};<!-- /react-text --></code></pre></li></ul><h2 id="图像灰化直接像素点操作" data-reactid="181"><a href="#%E5%9B%BE%E5%83%8F%E7%81%B0%E5%8C%96%E7%9B%B4%E6%8E%A5%E5%83%8F%E7%B4%A0%E7%82%B9%E6%93%8D%E4%BD%9C" aria-hidden="true" data-reactid="182"><span class="icon icon-link" data-reactid="183"></span></a><!-- react-text: 184 -->图像灰化(直接像素点操作)<!-- /react-text --></h2><ul data-reactid="185"><li data-reactid="186"><!-- react-text: 187 -->如图 <!-- /react-text --><div data-reactid="188"><style data-reactid="189">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:540px;max-height:540pxpx;" data-reactid="190"><div class="medium-image-progressive-placeholder" style="padding-bottom:49.074074074074076%;" data-reactid="191"></div><div class="medium-image-progressive" data-reactid="192"><canvas data-reactid="193"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="194"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FvwSNwQGsLpUjptBT1NKs6IMq1Cc?imageslim" data-reactid="195"/><noscript data-reactid="196"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FvwSNwQGsLpUjptBT1NKs6IMq1Cc?imageslim" data-reactid="197"/></noscript></div></div></div></li><li data-reactid="198"><p data-reactid="199">代码</p><pre data-reactid="200"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="201"><!-- react-text: 202 -->imgGrayHandle = <!-- /react-text --><span class="hljs-function" data-reactid="203"><span class="hljs-keyword" data-reactid="204">function</span><!-- react-text: 205 --> (<!-- /react-text --><span class="hljs-params" data-reactid="206"></span><!-- react-text: 207 -->) <!-- /react-text --></span><!-- react-text: 208 -->{
    paint.images.forEach(<!-- /react-text --><span class="hljs-function" data-reactid="209"><span class="hljs-keyword" data-reactid="210">function</span><!-- react-text: 211 --> (<!-- /react-text --><span class="hljs-params" data-reactid="212">ele</span><!-- react-text: 213 -->) <!-- /react-text --></span><!-- react-text: 214 -->{
        <!-- /react-text --><span class="hljs-keyword" data-reactid="215">var</span><!-- react-text: 216 --> imgData = paint.getImageData(ele.x,ele.y,ele.width,ele.height);
        <!-- /react-text --><span class="hljs-keyword" data-reactid="217">for</span><!-- react-text: 218 --> (<!-- /react-text --><span class="hljs-keyword" data-reactid="219">var</span><!-- react-text: 220 --> i=<!-- /react-text --><span class="hljs-number" data-reactid="221">0</span><!-- react-text: 222 -->;i&lt;imgData.data.length;i+=<!-- /react-text --><span class="hljs-number" data-reactid="223">4</span><!-- react-text: 224 -->) {
            <!-- /react-text --><span class="hljs-keyword" data-reactid="225">var</span><!-- react-text: 226 --> r = imgData.data[i],g=imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="227">1</span><!-- react-text: 228 -->],b = imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="229">2</span><!-- react-text: 230 -->];
            <!-- /react-text --><span class="hljs-keyword" data-reactid="231">var</span><!-- react-text: 232 --> value = (r+g+b)/<!-- /react-text --><span class="hljs-number" data-reactid="233">3</span><!-- react-text: 234 -->; <!-- /react-text --><span class="hljs-comment" data-reactid="235">//rgb平均值-&gt;灰度</span><!-- react-text: 236 -->
            imgData.data[i]=imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="237">1</span><!-- react-text: 238 -->]=imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="239">2</span><!-- react-text: 240 -->]=value;
        }
        paint.putImageData(imgData,ele.x,ele.y);
    })
};<!-- /react-text --></code></pre></li></ul><h2 id="高对比度直接像素点操作" data-reactid="241"><a href="#%E9%AB%98%E5%AF%B9%E6%AF%94%E5%BA%A6%E7%9B%B4%E6%8E%A5%E5%83%8F%E7%B4%A0%E7%82%B9%E6%93%8D%E4%BD%9C" aria-hidden="true" data-reactid="242"><span class="icon icon-link" data-reactid="243"></span></a><!-- react-text: 244 -->高对比度(直接像素点操作)<!-- /react-text --></h2><ul data-reactid="245"><li data-reactid="246"><!-- react-text: 247 -->如图 <!-- /react-text --><div data-reactid="248"><style data-reactid="249">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:558px;max-height:558pxpx;" data-reactid="250"><div class="medium-image-progressive-placeholder" style="padding-bottom:46.236559139784944%;" data-reactid="251"></div><div class="medium-image-progressive" data-reactid="252"><canvas data-reactid="253"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="254"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/Fq4fUyU60zSFY3EIEnx_WtlDD2EY?imageslim" data-reactid="255"/><noscript data-reactid="256"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/Fq4fUyU60zSFY3EIEnx_WtlDD2EY?imageslim" data-reactid="257"/></noscript></div></div></div></li><li data-reactid="258"><p data-reactid="259">代码</p><pre data-reactid="260"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="261"><!-- react-text: 262 -->hgHandle = <!-- /react-text --><span class="hljs-function" data-reactid="263"><span class="hljs-keyword" data-reactid="264">function</span><!-- react-text: 265 --> (<!-- /react-text --><span class="hljs-params" data-reactid="266"></span><!-- react-text: 267 -->) <!-- /react-text --></span><!-- react-text: 268 -->{
    paint.images.forEach(<!-- /react-text --><span class="hljs-function" data-reactid="269"><span class="hljs-keyword" data-reactid="270">function</span><!-- react-text: 271 --> (<!-- /react-text --><span class="hljs-params" data-reactid="272">ele</span><!-- react-text: 273 -->) <!-- /react-text --></span><!-- react-text: 274 -->{
        <!-- /react-text --><span class="hljs-keyword" data-reactid="275">var</span><!-- react-text: 276 --> imgData = paint.getImageData(ele.x,ele.y,ele.width,ele.height);
        <!-- /react-text --><span class="hljs-keyword" data-reactid="277">for</span><!-- react-text: 278 --> (<!-- /react-text --><span class="hljs-keyword" data-reactid="279">var</span><!-- react-text: 280 --> i=<!-- /react-text --><span class="hljs-number" data-reactid="281">0</span><!-- react-text: 282 -->;i&lt;imgData.data.length;i+=<!-- /react-text --><span class="hljs-number" data-reactid="283">4</span><!-- react-text: 284 -->) {
            <!-- /react-text --><span class="hljs-comment" data-reactid="285">// 取背景色的反作为前景色</span><!-- react-text: 286 -->
            imgData.data[i] = <!-- /react-text --><span class="hljs-number" data-reactid="287">255</span><!-- react-text: 288 -->-imgData.data[i];
            imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="289">1</span><!-- react-text: 290 -->] = <!-- /react-text --><span class="hljs-number" data-reactid="291">255</span><!-- react-text: 292 -->-imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="293">1</span><!-- react-text: 294 -->];
            imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="295">2</span><!-- react-text: 296 -->] = <!-- /react-text --><span class="hljs-number" data-reactid="297">255</span><!-- react-text: 298 -->-imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="299">2</span><!-- react-text: 300 -->];
        }
        paint.putImageData(imgData,ele.x,ele.y);
    })
};<!-- /react-text --></code></pre></li></ul><h2 id="浮雕效果锐化滤波器" data-reactid="301"><a href="#%E6%B5%AE%E9%9B%95%E6%95%88%E6%9E%9C%E9%94%90%E5%8C%96%E6%BB%A4%E6%B3%A2%E5%99%A8" aria-hidden="true" data-reactid="302"><span class="icon icon-link" data-reactid="303"></span></a><!-- react-text: 304 -->浮雕效果(锐化滤波器)<!-- /react-text --></h2><ul data-reactid="305"><li data-reactid="306"><!-- react-text: 307 -->如图 <!-- /react-text --><div data-reactid="308"><style data-reactid="309">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:539px;max-height:539pxpx;" data-reactid="310"><div class="medium-image-progressive-placeholder" style="padding-bottom:48.42300556586271%;" data-reactid="311"></div><div class="medium-image-progressive" data-reactid="312"><canvas data-reactid="313"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="314"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FkmvcJ6520vsm6HomvGwCWQbUsZf?imageslim" data-reactid="315"/><noscript data-reactid="316"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FkmvcJ6520vsm6HomvGwCWQbUsZf?imageslim" data-reactid="317"/></noscript></div></div></div></li><li data-reactid="318"><p data-reactid="319">代码</p><pre data-reactid="320"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="321"><span class="hljs-function" data-reactid="322"><span class="hljs-keyword" data-reactid="323">function</span><!-- react-text: 324 --> <!-- /react-text --><span class="hljs-title" data-reactid="325">ConvolutionMatrix</span><!-- react-text: 326 -->(<!-- /react-text --><span class="hljs-params" data-reactid="327">input, matrix, divisor, offset</span><!-- react-text: 328 -->) <!-- /react-text --></span><!-- react-text: 329 -->{
    <!-- /react-text --><span class="hljs-comment" data-reactid="330">// 创建一个输出的 imageData 对象</span><!-- react-text: 331 -->
    <!-- /react-text --><span class="hljs-keyword" data-reactid="332">var</span><!-- react-text: 333 --> output = <!-- /react-text --><span class="hljs-built_in" data-reactid="334">document</span><!-- react-text: 335 -->.createElement(<!-- /react-text --><span class="hljs-string" data-reactid="336">&quot;canvas&quot;</span><!-- react-text: 337 -->)
        .getContext(<!-- /react-text --><span class="hljs-string" data-reactid="338">&#x27;2d&#x27;</span><!-- react-text: 339 -->).createImageData(input);
    <!-- /react-text --><span class="hljs-keyword" data-reactid="340">var</span><!-- react-text: 341 --> w = input.width, h = input.height;
    <!-- /react-text --><span class="hljs-keyword" data-reactid="342">var</span><!-- react-text: 343 --> iD = input.data, oD = output.data;
    <!-- /react-text --><span class="hljs-keyword" data-reactid="344">var</span><!-- react-text: 345 --> m = matrix;
    <!-- /react-text --><span class="hljs-comment" data-reactid="346">// 对除了边缘的点之外的内部点的 RGB 进行操作，透明度在最后都设为 255</span><!-- react-text: 347 -->
    <!-- /react-text --><span class="hljs-keyword" data-reactid="348">for</span><!-- react-text: 349 --> (<!-- /react-text --><span class="hljs-keyword" data-reactid="350">var</span><!-- react-text: 351 --> y = <!-- /react-text --><span class="hljs-number" data-reactid="352">1</span><!-- react-text: 353 -->; y &lt; h - <!-- /react-text --><span class="hljs-number" data-reactid="354">1</span><!-- react-text: 355 -->; y += <!-- /react-text --><span class="hljs-number" data-reactid="356">1</span><!-- react-text: 357 -->) {
        <!-- /react-text --><span class="hljs-keyword" data-reactid="358">for</span><!-- react-text: 359 --> (<!-- /react-text --><span class="hljs-keyword" data-reactid="360">var</span><!-- react-text: 361 --> x = <!-- /react-text --><span class="hljs-number" data-reactid="362">1</span><!-- react-text: 363 -->; x &lt; w - <!-- /react-text --><span class="hljs-number" data-reactid="364">1</span><!-- react-text: 365 -->; x += <!-- /react-text --><span class="hljs-number" data-reactid="366">1</span><!-- react-text: 367 -->) {
            <!-- /react-text --><span class="hljs-keyword" data-reactid="368">for</span><!-- react-text: 369 --> (<!-- /react-text --><span class="hljs-keyword" data-reactid="370">var</span><!-- react-text: 371 --> c = <!-- /react-text --><span class="hljs-number" data-reactid="372">0</span><!-- react-text: 373 -->; c &lt; <!-- /react-text --><span class="hljs-number" data-reactid="374">3</span><!-- react-text: 375 -->; c += <!-- /react-text --><span class="hljs-number" data-reactid="376">1</span><!-- react-text: 377 -->) {
                <!-- /react-text --><span class="hljs-keyword" data-reactid="378">var</span><!-- react-text: 379 --> i = (y * w + x) * <!-- /react-text --><span class="hljs-number" data-reactid="380">4</span><!-- react-text: 381 --> + c;
                oD[i] = offset
                    + (m[<!-- /react-text --><span class="hljs-number" data-reactid="382">0</span><!-- react-text: 383 -->] * iD[i - w * <!-- /react-text --><span class="hljs-number" data-reactid="384">4</span><!-- react-text: 385 --> - <!-- /react-text --><span class="hljs-number" data-reactid="386">4</span><!-- react-text: 387 -->] + m[<!-- /react-text --><span class="hljs-number" data-reactid="388">1</span><!-- react-text: 389 -->] * iD[i - w * <!-- /react-text --><span class="hljs-number" data-reactid="390">4</span><!-- react-text: 391 -->] + m[<!-- /react-text --><span class="hljs-number" data-reactid="392">2</span><!-- react-text: 393 -->] * iD[i - w * <!-- /react-text --><span class="hljs-number" data-reactid="394">4</span><!-- react-text: 395 --> + <!-- /react-text --><span class="hljs-number" data-reactid="396">4</span><!-- react-text: 397 -->]
                    + m[<!-- /react-text --><span class="hljs-number" data-reactid="398">3</span><!-- react-text: 399 -->] * iD[i - <!-- /react-text --><span class="hljs-number" data-reactid="400">4</span><!-- react-text: 401 -->] + m[<!-- /react-text --><span class="hljs-number" data-reactid="402">4</span><!-- react-text: 403 -->] * iD[i] + m[<!-- /react-text --><span class="hljs-number" data-reactid="404">5</span><!-- react-text: 405 -->] * iD[i + <!-- /react-text --><span class="hljs-number" data-reactid="406">4</span><!-- react-text: 407 -->]
                    + m[<!-- /react-text --><span class="hljs-number" data-reactid="408">6</span><!-- react-text: 409 -->] * iD[i + w * <!-- /react-text --><span class="hljs-number" data-reactid="410">4</span><!-- react-text: 411 --> - <!-- /react-text --><span class="hljs-number" data-reactid="412">4</span><!-- react-text: 413 -->] + m[<!-- /react-text --><span class="hljs-number" data-reactid="414">7</span><!-- react-text: 415 -->] * iD[i + w * <!-- /react-text --><span class="hljs-number" data-reactid="416">4</span><!-- react-text: 417 -->] + m[<!-- /react-text --><span class="hljs-number" data-reactid="418">8</span><!-- react-text: 419 -->] * iD[i + w * <!-- /react-text --><span class="hljs-number" data-reactid="420">4</span><!-- react-text: 421 --> + <!-- /react-text --><span class="hljs-number" data-reactid="422">4</span><!-- react-text: 423 -->])
                    / divisor;
                oD[(y * w + x) * <!-- /react-text --><span class="hljs-number" data-reactid="424">4</span><!-- react-text: 425 --> + <!-- /react-text --><span class="hljs-number" data-reactid="426">3</span><!-- react-text: 427 -->] = <!-- /react-text --><span class="hljs-number" data-reactid="428">255</span><!-- react-text: 429 -->; <!-- /react-text --><span class="hljs-comment" data-reactid="430">// 设置透明度</span><!-- react-text: 431 -->
            }
        }
    }
    <!-- /react-text --><span class="hljs-keyword" data-reactid="432">return</span><!-- react-text: 433 --> output;
};<!-- /react-text --></code></pre></li></ul><h2 id="图像黑化直接像素点操作" data-reactid="434"><a href="#%E5%9B%BE%E5%83%8F%E9%BB%91%E5%8C%96%E7%9B%B4%E6%8E%A5%E5%83%8F%E7%B4%A0%E7%82%B9%E6%93%8D%E4%BD%9C" aria-hidden="true" data-reactid="435"><span class="icon icon-link" data-reactid="436"></span></a><!-- react-text: 437 -->图像黑化(直接像素点操作)<!-- /react-text --></h2><ul data-reactid="438"><li data-reactid="439"><!-- react-text: 440 -->如图 <!-- /react-text --><img src="/images/imgpro5.png" alt="imgpro5.png" width="546" height="266" data-reactid="441"/></li><li data-reactid="442"><p data-reactid="443">代码</p><pre data-reactid="444"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="445"><!-- react-text: 446 -->blackHandle = <!-- /react-text --><span class="hljs-function" data-reactid="447"><span class="hljs-keyword" data-reactid="448">function</span><!-- react-text: 449 --> (<!-- /react-text --><span class="hljs-params" data-reactid="450"></span><!-- react-text: 451 -->) <!-- /react-text --></span><!-- react-text: 452 -->{
    paint.images.forEach(<!-- /react-text --><span class="hljs-function" data-reactid="453"><span class="hljs-keyword" data-reactid="454">function</span><!-- react-text: 455 --> (<!-- /react-text --><span class="hljs-params" data-reactid="456">ele</span><!-- react-text: 457 -->) <!-- /react-text --></span><!-- react-text: 458 -->{
        <!-- /react-text --><span class="hljs-keyword" data-reactid="459">var</span><!-- react-text: 460 --> imgData = paint.getImageData(ele.x,ele.y,ele.width,ele.height);
        <!-- /react-text --><span class="hljs-keyword" data-reactid="461">for</span><!-- react-text: 462 --> (<!-- /react-text --><span class="hljs-keyword" data-reactid="463">var</span><!-- react-text: 464 --> i=<!-- /react-text --><span class="hljs-number" data-reactid="465">0</span><!-- react-text: 466 -->;i&lt;imgData.data.length;i+=<!-- /react-text --><span class="hljs-number" data-reactid="467">4</span><!-- react-text: 468 -->) {
            <!-- /react-text --><span class="hljs-keyword" data-reactid="469">var</span><!-- react-text: 470 --> r = imgData.data[i],g=imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="471">1</span><!-- react-text: 472 -->],b = imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="473">2</span><!-- react-text: 474 -->];
            <!-- /react-text --><span class="hljs-keyword" data-reactid="475">var</span><!-- react-text: 476 --> grey = r*<!-- /react-text --><span class="hljs-number" data-reactid="477">0.3</span><!-- react-text: 478 -->+g*<!-- /react-text --><span class="hljs-number" data-reactid="479">0.59</span><!-- react-text: 480 -->+b*<!-- /react-text --><span class="hljs-number" data-reactid="481">0.11</span><!-- react-text: 482 -->;
            <!-- /react-text --><span class="hljs-comment" data-reactid="483">// 取0或者255,非黑即白</span><!-- react-text: 484 -->
            imgData.data[i] = imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="485">1</span><!-- react-text: 486 -->] = imgData.data[i+<!-- /react-text --><span class="hljs-number" data-reactid="487">2</span><!-- react-text: 488 -->] = grey&gt;<!-- /react-text --><span class="hljs-number" data-reactid="489">125</span><!-- react-text: 490 --> ? <!-- /react-text --><span class="hljs-number" data-reactid="491">255</span><!-- react-text: 492 --> : <!-- /react-text --><span class="hljs-number" data-reactid="493">0</span><!-- react-text: 494 -->;
        }
        paint.putImageData(imgData,ele.x,ele.y);
    })
}<!-- /react-text --></code></pre></li></ul><h2 id="模糊效果线性平滑滤波器" data-reactid="495"><a href="#%E6%A8%A1%E7%B3%8A%E6%95%88%E6%9E%9C%E7%BA%BF%E6%80%A7%E5%B9%B3%E6%BB%91%E6%BB%A4%E6%B3%A2%E5%99%A8" aria-hidden="true" data-reactid="496"><span class="icon icon-link" data-reactid="497"></span></a><!-- react-text: 498 -->模糊效果(线性平滑滤波器)<!-- /react-text --></h2><ul data-reactid="499"><li data-reactid="500"><!-- react-text: 501 -->如图 <!-- /react-text --><div data-reactid="502"><style data-reactid="503">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:542px;max-height:542pxpx;" data-reactid="504"><div class="medium-image-progressive-placeholder" style="padding-bottom:46.494464944649444%;" data-reactid="505"></div><div class="medium-image-progressive" data-reactid="506"><canvas data-reactid="507"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="508"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/Fo05MIaOVxYft3uLkjZw7rgIgaVp?imageslim" data-reactid="509"/><noscript data-reactid="510"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/Fo05MIaOVxYft3uLkjZw7rgIgaVp?imageslim" data-reactid="511"/></noscript></div></div></div><div data-reactid="512"><style data-reactid="513">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:546px;max-height:546pxpx;" data-reactid="514"><div class="medium-image-progressive-placeholder" style="padding-bottom:48.717948717948715%;" data-reactid="515"></div><div class="medium-image-progressive" data-reactid="516"><canvas data-reactid="517"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="518"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FuhpGHFjE7Pzd5qZdrQZyI8YY9NL?imageslim" data-reactid="519"/><noscript data-reactid="520"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FuhpGHFjE7Pzd5qZdrQZyI8YY9NL?imageslim" data-reactid="521"/></noscript></div></div></div></li><li data-reactid="522"><p data-reactid="523">代码</p><pre data-reactid="524"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="525"><!-- react-text: 526 -->blurHandle = <!-- /react-text --><span class="hljs-function" data-reactid="527"><span class="hljs-keyword" data-reactid="528">function</span><!-- react-text: 529 --> (<!-- /react-text --><span class="hljs-params" data-reactid="530"></span><!-- react-text: 531 -->)<!-- /react-text --></span><!-- react-text: 532 -->{
    paint.images.forEach(<!-- /react-text --><span class="hljs-function" data-reactid="533"><span class="hljs-keyword" data-reactid="534">function</span><!-- react-text: 535 --> (<!-- /react-text --><span class="hljs-params" data-reactid="536">ele</span><!-- react-text: 537 -->) <!-- /react-text --></span><!-- react-text: 538 -->{
        <!-- /react-text --><span class="hljs-keyword" data-reactid="539">var</span><!-- react-text: 540 --> imgData = paint.getImageData(ele.x, ele.y, ele.width, ele.height);
        <!-- /react-text --><span class="hljs-keyword" data-reactid="541">var</span><!-- react-text: 542 --> blurR = <!-- /react-text --><span class="hljs-number" data-reactid="543">3</span><!-- react-text: 544 -->, totalnum = (<!-- /react-text --><span class="hljs-number" data-reactid="545">2</span><!-- react-text: 546 --> * blurR + <!-- /react-text --><span class="hljs-number" data-reactid="547">1</span><!-- react-text: 548 -->) * (<!-- /react-text --><span class="hljs-number" data-reactid="549">2</span><!-- react-text: 550 --> * blurR + <!-- /react-text --><span class="hljs-number" data-reactid="551">1</span><!-- react-text: 552 -->);
        <!-- /react-text --><span class="hljs-keyword" data-reactid="553">for</span><!-- react-text: 554 --> (<!-- /react-text --><span class="hljs-keyword" data-reactid="555">var</span><!-- react-text: 556 --> i = blurR; i &lt; ele.height - blurR; i++)
            <!-- /react-text --><span class="hljs-keyword" data-reactid="557">for</span><!-- react-text: 558 --> (<!-- /react-text --><span class="hljs-keyword" data-reactid="559">var</span><!-- react-text: 560 --> j = blurR; j &lt; ele.width - blurR; j++) {
                <!-- /react-text --><span class="hljs-keyword" data-reactid="561">var</span><!-- react-text: 562 --> totalr = <!-- /react-text --><span class="hljs-number" data-reactid="563">0</span><!-- react-text: 564 -->, totalg = <!-- /react-text --><span class="hljs-number" data-reactid="565">0</span><!-- react-text: 566 -->, totalb = <!-- /react-text --><span class="hljs-number" data-reactid="567">0</span><!-- react-text: 568 -->;
                <!-- /react-text --><span class="hljs-comment" data-reactid="569">//2*blurR 模糊的正方形长宽，total 范围内RGB的总和</span><!-- react-text: 570 -->
                <!-- /react-text --><span class="hljs-keyword" data-reactid="571">for</span><!-- react-text: 572 --> (<!-- /react-text --><span class="hljs-keyword" data-reactid="573">var</span><!-- react-text: 574 --> dx = -blurR; dx &lt;= blurR; dx++)
                    <!-- /react-text --><span class="hljs-keyword" data-reactid="575">for</span><!-- react-text: 576 --> (<!-- /react-text --><span class="hljs-keyword" data-reactid="577">var</span><!-- react-text: 578 --> dy = -blurR; dy &lt;= blurR; dy++) {
                        <!-- /react-text --><span class="hljs-keyword" data-reactid="579">var</span><!-- react-text: 580 --> x = i + dx
                        <!-- /react-text --><span class="hljs-keyword" data-reactid="581">var</span><!-- react-text: 582 --> y = j + dy
                        <!-- /react-text --><span class="hljs-keyword" data-reactid="583">var</span><!-- react-text: 584 --> p = (x * ele.width + y)*<!-- /react-text --><span class="hljs-number" data-reactid="585">4</span><!-- react-text: 586 -->;
                        totalr += imgData.data[p + <!-- /react-text --><span class="hljs-number" data-reactid="587">0</span><!-- react-text: 588 -->]
                        totalg += imgData.data[p + <!-- /react-text --><span class="hljs-number" data-reactid="589">1</span><!-- react-text: 590 -->]
                        totalb += imgData.data[p + <!-- /react-text --><span class="hljs-number" data-reactid="591">2</span><!-- react-text: 592 -->]
                    }
                <!-- /react-text --><span class="hljs-keyword" data-reactid="593">var</span><!-- react-text: 594 --> p = (i*ele.width + j)*<!-- /react-text --><span class="hljs-number" data-reactid="595">4</span><!-- react-text: 596 -->;
                imgData.data[p+<!-- /react-text --><span class="hljs-number" data-reactid="597">0</span><!-- react-text: 598 -->] = totalr / totalnum;
                imgData.data[p+<!-- /react-text --><span class="hljs-number" data-reactid="599">1</span><!-- react-text: 600 -->] = totalg / totalnum;
                imgData.data[p+<!-- /react-text --><span class="hljs-number" data-reactid="601">2</span><!-- react-text: 602 -->] = totalb / totalnum;
            }
        paint.putImageData(imgData,ele.x,ele.y);
    });
};<!-- /react-text --></code></pre></li></ul><h2 id="马赛克效果平滑滤波器" data-reactid="603"><a href="#%E9%A9%AC%E8%B5%9B%E5%85%8B%E6%95%88%E6%9E%9C%E5%B9%B3%E6%BB%91%E6%BB%A4%E6%B3%A2%E5%99%A8" aria-hidden="true" data-reactid="604"><span class="icon icon-link" data-reactid="605"></span></a><!-- react-text: 606 -->马赛克效果(平滑滤波器)<!-- /react-text --></h2><ul data-reactid="607"><li data-reactid="608"><p data-reactid="609"><!-- react-text: 610 -->如图 <!-- /react-text --><div data-reactid="611"><style data-reactid="612">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:541px;max-height:541pxpx;" data-reactid="613"><div class="medium-image-progressive-placeholder" style="padding-bottom:48.059149722735675%;" data-reactid="614"></div><div class="medium-image-progressive" data-reactid="615"><canvas data-reactid="616"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="617"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FmhxBd8me8P8_Czqeh3BaPxnudM5?imageslim" data-reactid="618"/><noscript data-reactid="619"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FmhxBd8me8P8_Czqeh3BaPxnudM5?imageslim" data-reactid="620"/></noscript></div></div></div></p></li><li data-reactid="621"><p data-reactid="622">代码</p><pre data-reactid="623"><code data-query="{}" data-lang="data-lang" data-reactid="624">```javascript
mosaicHandle = function (){
    paint.images.forEach(function (ele) {
        var imgData = paint.getImageData(ele.x, ele.y, ele.width, ele.height);
        var size = 16
        var totalnum = size*size;
        for( var i = 0 ; i &lt; ele.height ; i += size )
            for( var j = 0 ; j &lt; ele.width ; j += size ){
                var totalr = 0 , totalg = 0 , totalb = 0
                //以size为大小作为一个像素方格
                for( var dx = 0 ; dx &lt; size ; dx ++ )
                    for( var dy = 0 ; dy &lt; size ; dy ++ ){
                        var x = i + dx;
                        var y = j + dy;
                        var p = x*ele.width + y
                        totalr += imgData.data[p*4+0]
                        totalg += imgData.data[p*4+1]
                        totalb += imgData.data[p*4+2]
                    }
                var p = i*ele.width+j
                var resr = totalr / totalnum
                var resg = totalg / totalnum
                var resb = totalb / totalnum;
                //将size大小内的像素点全部设为平均rgb
                for( var dx = 0 ; dx &lt; size ; dx ++ )
                    for( var dy = 0 ; dy &lt; size ; dy ++ ){
                        var x = i + dx
                        var y = j + dy
                        var p = x*ele.width + y
                        imgData.data[p*4+0] = resr
                        imgData.data[p*4+1] = resg
                        imgData.data[p*4+2] = resb
                    }
            }
        paint.putImageData(imgData,ele.x,ele.y);
    })
}
```
</code></pre><h2 id="kmenus算法矢量量化" data-reactid="625"><a href="#kmenus%E7%AE%97%E6%B3%95%E7%9F%A2%E9%87%8F%E9%87%8F%E5%8C%96" aria-hidden="true" data-reactid="626"><span class="icon icon-link" data-reactid="627"></span></a><!-- react-text: 628 -->KMenus算法(矢量量化)<!-- /react-text --></h2></li><li data-reactid="629"><p data-reactid="630">说明：KMenus算法是一个聚类算法，我们可以用该算法思想，找出图像中主要的rgb颜色。（可以将rgb想象为三维空间xyz，找出图像中rgb聚集的地方）然后把属于该聚类中的所有像素点全部赋值为聚类像素值，查看效果</p></li><li data-reactid="631"><p data-reactid="632"><!-- react-text: 633 -->如图 <!-- /react-text --><div data-reactid="634"><style data-reactid="635">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:547px;max-height:547pxpx;" data-reactid="636"><div class="medium-image-progressive-placeholder" style="padding-bottom:59.23217550274224%;" data-reactid="637"></div><div class="medium-image-progressive" data-reactid="638"><canvas data-reactid="639"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="640"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FlxYpIXzpNyQE68RFGZuyxwWYfTM?imageslim" data-reactid="641"/><noscript data-reactid="642"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FlxYpIXzpNyQE68RFGZuyxwWYfTM?imageslim" data-reactid="643"/></noscript></div></div></div></p></li><li data-reactid="644"><p data-reactid="645">代码</p><pre data-reactid="646"><code data-query="{}" data-lang="data-lang" data-reactid="647">```javascript
kMeans : function(imgData){
        var data = imgData.data, w = imgData.width, h = imgData.height;
        var clusters = (function getRandomClusters(k){
            var rlt = [];
            while(k--&gt;0)
                rlt.push([randomInt(256),randomInt(256),randomInt(256)]);
            return rlt;
        })(3);
        function getRGBDistance(clu,rgb){
            return parseInt(Math.sqrt(Math.pow(rgb[0]-clu[0],2)+Math.pow(rgb[1]-clu[1],2),Math.pow(rgb[2]-clu[2],2)).toFixed(0));
        }
        function getCenterCluster(rgbs){
            var sumr= 0,sumg= 0,sumb=0;
            for(var i in rgbs){
                sumr+=rgbs[i][0];sumg+=rgbs[i][1];sumb+=rgbs[i][2];
            }
            return [parseInt((sumr/rgbs.length).toFixed(0)),
                parseInt((sumg/rgbs.length).toFixed(0)),
                parseInt((sumb/rgbs.length).toFixed(0))]
        }
        var forNewClus = new Array(clusters.length),forNewData = new Array(clusters.length);
        while(true) {
            for(var i=0;i&lt;forNewClus.length;i++) {
                forNewClus[i] = [];
                forNewData[i] = [];
            }
            for (var i = 0; i &lt; data.length; i += 4) {
                var myCluIndex, minDist = Number.MAX_VALUE, rgb = [data[i], data[i + 1], data[i + 2]];
                for (var j = 0; j &lt; clusters.length; j++) {
                    var dist = getRGBDistance(clusters[j], rgb);
                    if (dist &lt; minDist) {
                        myCluIndex = j;
                        minDist = dist;
                    }
                }
                forNewData[myCluIndex].push(i);
                forNewClus[myCluIndex].push(rgb);
            }
            var isUpdate=false;
            for(var i=0;i&lt;forNewClus.length;i++) {
                if(forNewClus[i].length==0)
                    continue;
                var c = getCenterCluster(forNewClus[i]);
                if(c[0]!=clusters[i][0]||c[1]!=clusters[i][1]||c[2]!=clusters[i][2]) {
                    clusters[i] = c;
                    isUpdate = true;
                }
            }
            if(!isUpdate)
                break;
        }
        for(var i=0;i&lt;forNewData.length;i++) {
            for(var j=0;j&lt;forNewClus[i].length;j++){
                var val = forNewData[i][j];
                data[val] = clusters[i][0];
                data[val+1] = clusters[i][1];
                data[val+2] = clusters[i][1];
            }
        }
        console.log(forNewClus,clusters);
        return {c:clusters,md:imgData};
    }
```
</code></pre><h2 id="直方图均衡化空域点处理" data-reactid="648"><a href="#%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1%E5%8C%96%E7%A9%BA%E5%9F%9F%E7%82%B9%E5%A4%84%E7%90%86" aria-hidden="true" data-reactid="649"><span class="icon icon-link" data-reactid="650"></span></a><!-- react-text: 651 -->直方图均衡化(空域点处理)<!-- /react-text --></h2></li><li data-reactid="652"><p data-reactid="653">说明：直方图均衡化：我们把一张图片对应的rgb像素点分成3个(对应rgb)256(0-255)等级，并且将等级绘制为直方图，我们把直方图变得分布均匀，这就是直方图均衡化。这样的图片往往具有高对比度。</p></li><li data-reactid="654"><p data-reactid="655"><!-- react-text: 656 -->如图 <!-- /react-text --><div data-reactid="657"><style data-reactid="658">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:537px;max-height:537pxpx;" data-reactid="659"><div class="medium-image-progressive-placeholder" style="padding-bottom:48.60335195530726%;" data-reactid="660"></div><div class="medium-image-progressive" data-reactid="661"><canvas data-reactid="662"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="663"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FmwuGT6aQQupiOOGufUTs2qO4dsH?imageslim" data-reactid="664"/><noscript data-reactid="665"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FmwuGT6aQQupiOOGufUTs2qO4dsH?imageslim" data-reactid="666"/></noscript></div></div></div></p></li><li data-reactid="667"><p data-reactid="668">代码</p><pre data-reactid="669"><code data-query="{}" data-lang="data-lang" data-reactid="670">```javascript
//http://blog.csdn.net/jia20003/article/details/8119563
//http://hello-wangfeng.iteye.com/blog/1717150
average: function (imgData) {
    var data = imgData.data, w = imgData.width, h = imgData.height;
    var histogramR = [],
        histogramG = [],
        histogramB = [];
    for(var i=0; i&lt;data.length; i+=4){
        histogramR[data[i]] = histogramR[data[i]]+1 || 1;
        histogramG[data[i+1]] = histogramG[data[i+1]]+1 || 1;
        histogramB[data[i+2]] = histogramB[data[i+2]]+1 || 1;
    }
    //直方图均衡化
    function getRate(grayHis,total,index) {
        var s = 0;
        for(var i=0;i&lt;index;i++){
            var v = grayHis[i]||0;
            s+=(v/total);
        }
        return Math.floor(s*255);
    }
    var total = w*h,
        newHisR = [],
        newHisG = [],
        newHisB = [];
    for(i=0; i&lt;256; i++){
        newHisR[i] = getRate(histogramR,total,i);
        newHisG[i] = getRate(histogramG,total,i);
        newHisB[i] = getRate(histogramB,total,i);
    }
    console.log([histogramR,histogramG,histogramB],[newHisR,newHisG,newHisB]);
    for(i=0; i&lt;h; i++){
        for(var j=0; j&lt;w; j++){
            var v = (i*w+j)&lt;&lt;2;
            data[v] = newHisR[data[v]];
            data[v+1]=newHisG[data[v+1]];
            data[v+1]=newHisB[data[v+2]];
        }
    }
    return imgData;
}
```
</code></pre><h2 id="图像复原" data-reactid="671"><a href="#%E5%9B%BE%E5%83%8F%E5%A4%8D%E5%8E%9F" aria-hidden="true" data-reactid="672"><span class="icon icon-link" data-reactid="673"></span></a><!-- react-text: 674 -->图像复原<!-- /react-text --></h2></li><li data-reactid="675"><p data-reactid="676">说明：图像在形成、记录、处理和传输过程中，由于成像系统、记录设备、传输介质和处理方法的问题，导致图像质量下降，这种现象叫图像退化。而图像复原就是对退化的图像进行处理，尽可能的复原图像的本来面目。</p></li><li data-reactid="677"><p data-reactid="678"><!-- react-text: 679 -->如图 <!-- /react-text --><div data-reactid="680"><style data-reactid="681">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:530px;max-height:530pxpx;" data-reactid="682"><div class="medium-image-progressive-placeholder" style="padding-bottom:62.264150943396224%;" data-reactid="683"></div><div class="medium-image-progressive" data-reactid="684"><canvas data-reactid="685"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="686"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FkLD1OdGi0WKdv26sK4ubCj3ov6B?imageslim" data-reactid="687"/><noscript data-reactid="688"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FkLD1OdGi0WKdv26sK4ubCj3ov6B?imageslim" data-reactid="689"/></noscript></div></div></div><!-- react-text: 690 --> <!-- /react-text --><div data-reactid="691"><style data-reactid="692">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:530px;max-height:530pxpx;" data-reactid="693"><div class="medium-image-progressive-placeholder" style="padding-bottom:62.264150943396224%;" data-reactid="694"></div><div class="medium-image-progressive" data-reactid="695"><canvas data-reactid="696"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="697"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FqQpRZv_Tzx54uHAREg7O9UPY8r3?imageslim" data-reactid="698"/><noscript data-reactid="699"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FqQpRZv_Tzx54uHAREg7O9UPY8r3?imageslim" data-reactid="700"/></noscript></div></div></div></p></li><li data-reactid="701"><p data-reactid="702">代码</p><pre data-reactid="703"><code data-query="{}" data-lang="data-lang" data-reactid="704">```java
//图像恢复
public int[] imRestore(int[] pixels, int iw, int ih)
{
    double[] newPixels = new double [iw*ih];
    double[] newKernel = new double [iw*ih];

    //初始化
    for(int j = 0; j &lt; ih; j++)
    {
        for(int i = 0; i &lt; iw; i++)
        {
            newPixels[i+j*iw] = pixels[i+j*iw]&amp;0xff;
            if((i&lt;5) &amp;&amp; (j&lt;5))
                newKernel[i+j*iw] = 1.0/25;
            else
                newKernel[i+j*iw] = 0;
        }
    }

    //初始化
    Complex[] complex   = new Complex[iw*ih];
    Complex[] comKernel = new Complex[iw*ih];
    for(int i = 0;i &lt; iw*ih; i++)
    {
        complex[i]   = new Complex(0,0);
        comKernel[i] = new Complex(0,0);
    }

    //对原图像进行FFT (快速傅氏变换)
    fft2 = new FFT2();
    fft2.setData2(iw, ih, newPixels);
    complex = fft2.getFFT2();

    //对卷积核进行FFT
    fft2 = new FFT2();
    fft2.setData2(iw, ih, newKernel);
    comKernel = fft2.getFFT2();

    //逆滤波复原
    for(int j = 0;j &lt; ih; j++)
    {
        for(int i = 0; i &lt; iw; i++)
        {
            double re = complex[i+j*iw].re;
            double im = complex[i+j*iw].im;
            double reKernel = comKernel[i+j*iw].re;
            double imKernel = comKernel[i+j*iw].im;
            double x = reKernel*reKernel+imKernel*imKernel;

            if(x &gt; 1e-3)
            {
                double r = (re*reKernel+im*imKernel)/x;
                double m = (im*reKernel-re*imKernel)/x;
                complex[i+j*iw].re = r;
                complex[i+j*iw].im = m;
            }
        }
    }

    //进行FFT反变换
    fft2 = new FFT2();
    fft2.setData2i(iw, ih, complex);
    pixels = fft2.getPixels2i();
    return pixels;
}
```
</code></pre><h2 id="边界检测自定义方法" data-reactid="705"><a href="#%E8%BE%B9%E7%95%8C%E6%A3%80%E6%B5%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95" aria-hidden="true" data-reactid="706"><span class="icon icon-link" data-reactid="707"></span></a><!-- react-text: 708 -->边界检测(自定义方法)<!-- /react-text --></h2></li><li data-reactid="709"><p data-reactid="710">说明：人们看一个物体是，首先感受的就是它的边缘，灰度或结构等信息的突变处称为边缘。边缘是一个区域的结束，也是另一个区域的开始，利用这种特征可以分割图像。 物体边缘上的这种变化可以用微分算子检测出来，通常用一阶或二阶导数来检测边缘。</p></li><li data-reactid="711"><p data-reactid="712"><!-- react-text: 713 -->如图 <!-- /react-text --><div data-reactid="714"><style data-reactid="715">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:545px;max-height:545pxpx;" data-reactid="716"><div class="medium-image-progressive-placeholder" style="padding-bottom:47.88990825688074%;" data-reactid="717"></div><div class="medium-image-progressive" data-reactid="718"><canvas data-reactid="719"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="720"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FtX_UjvlyHv3o98RvaXwh7gsihqP?imageslim" data-reactid="721"/><noscript data-reactid="722"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FtX_UjvlyHv3o98RvaXwh7gsihqP?imageslim" data-reactid="723"/></noscript></div></div></div></p></li><li data-reactid="724"><p data-reactid="725">代码</p><pre data-reactid="726"><code data-query="{}" data-lang="data-lang" data-reactid="727">```java
//边界提取
public byte[] Bound(byte bw[], int iw, int ih)
{
    int p, r;
    byte[] tem = new byte[iw*ih];
    for(int j = 0;j &lt; ih; j++)
        for(int i = 0; i &lt; iw; i++)
            tem[i+j*iw] = bw[i+j*iw];
    for(int j = 1; j &lt; ih - 1; j++)
    {
        for (int i = 1; i &lt; iw - 1; i++)
        {
            p = bw[i+j*iw];
            if(p == 0)//如果当前象素是白色, 进入下一个循环
                continue;
            else
            {
                // 检查周边的8-连通域
                r = 1;
                LB:
                for(int k =-1;k&lt;2;k++)
                {
                    for(int l=-1;l&lt;2;l++)
                    {
                        if(bw[i+k+(j+l)*iw] == 0)
                        {
                            r = 0;
                            break LB;//跳出2重循环
                        }
                    }
                }
                //如果都是黑点,判定为内部点,改变颜色
                if(r == 1)
                    tem[i+j*iw] = 0;
            }
        }
    }
    return tem;
}
```
</code></pre><h2 id="素描效果roberts边界检测" data-reactid="728"><a href="#%E7%B4%A0%E6%8F%8F%E6%95%88%E6%9E%9Croberts%E8%BE%B9%E7%95%8C%E6%A3%80%E6%B5%8B" aria-hidden="true" data-reactid="729"><span class="icon icon-link" data-reactid="730"></span></a><!-- react-text: 731 -->素描效果(roberts边界检测)<!-- /react-text --></h2></li><li data-reactid="732"><p data-reactid="733">说明：上面说到边缘可以用微分算子检测，roberts算子就是基于一阶导数的边缘检测算子的一种。</p></li><li data-reactid="734"><p data-reactid="735"><!-- react-text: 736 -->如图 <!-- /react-text --><div data-reactid="737"><style data-reactid="738">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:542px;max-height:542pxpx;" data-reactid="739"><div class="medium-image-progressive-placeholder" style="padding-bottom:48.154981549815496%;" data-reactid="740"></div><div class="medium-image-progressive" data-reactid="741"><canvas data-reactid="742"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="743"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/Fk7ZRWXH81MM58St-T3chZiCay6-?imageslim" data-reactid="744"/><noscript data-reactid="745"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/Fk7ZRWXH81MM58St-T3chZiCay6-?imageslim" data-reactid="746"/></noscript></div></div></div></p></li><li data-reactid="747"><p data-reactid="748">代码</p><pre data-reactid="749"><code class="hljs language-java" data-query="{}" data-lang="java" data-reactid="750"><span class="hljs-comment" data-reactid="751">//Roberts算法</span><!-- react-text: 752 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="753">public</span><!-- react-text: 754 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="755">int</span><!-- react-text: 756 -->[] robert(<!-- /react-text --><span class="hljs-keyword" data-reactid="757">int</span><!-- react-text: 758 -->[] px, <!-- /react-text --><span class="hljs-keyword" data-reactid="759">int</span><!-- react-text: 760 --> iw, <!-- /react-text --><span class="hljs-keyword" data-reactid="761">int</span><!-- react-text: 762 --> ih, <!-- /react-text --><span class="hljs-keyword" data-reactid="763">int</span><!-- react-text: 764 --> thresh, <!-- /react-text --><span class="hljs-keyword" data-reactid="765">boolean</span><!-- react-text: 766 --> flag)
{
    ColorModel cm = ColorModel.getRGBdefault();
    <!-- /react-text --><span class="hljs-keyword" data-reactid="767">int</span><!-- react-text: 768 --> r, r0, r1, r2, r3, g, g0, g1, g2, g3, b, b0, b1, b2, b3;
    <!-- /react-text --><span class="hljs-keyword" data-reactid="769">for</span><!-- react-text: 770 -->(<!-- /react-text --><span class="hljs-keyword" data-reactid="771">int</span><!-- react-text: 772 --> j = <!-- /react-text --><span class="hljs-number" data-reactid="773">1</span><!-- react-text: 774 -->; j &lt; ih-<!-- /react-text --><span class="hljs-number" data-reactid="775">1</span><!-- react-text: 776 -->; j++)
    {
        <!-- /react-text --><span class="hljs-keyword" data-reactid="777">for</span><!-- react-text: 778 -->(<!-- /react-text --><span class="hljs-keyword" data-reactid="779">int</span><!-- react-text: 780 --> i = <!-- /react-text --><span class="hljs-number" data-reactid="781">1</span><!-- react-text: 782 -->; i &lt; iw-<!-- /react-text --><span class="hljs-number" data-reactid="783">1</span><!-- react-text: 784 -->; i++)
        {
            r0 = cm.getRed(px[i+j*iw]);
            r1 = cm.getRed(px[i+(j+<!-- /react-text --><span class="hljs-number" data-reactid="785">1</span><!-- react-text: 786 -->)*iw]);
            r2 = cm.getRed(px[i+<!-- /react-text --><span class="hljs-number" data-reactid="787">1</span><!-- react-text: 788 -->+j*iw]);
            r3 = cm.getRed(px[i+<!-- /react-text --><span class="hljs-number" data-reactid="789">1</span><!-- react-text: 790 -->+(j+<!-- /react-text --><span class="hljs-number" data-reactid="791">1</span><!-- react-text: 792 -->)*iw]);
            <!-- /react-text --><span class="hljs-comment" data-reactid="793">/*--------------------------------------------*
             * -------------------------
             * |r0:(i,j)  |r1:(i, j+1) |
             * |-----------------------| 交叉
             * |r2:(i+1,j)|r3:(i+1,j+1)|
             * -------------------------
             *--------------------------------------------*/</span><!-- react-text: 794 -->
            r = (<!-- /react-text --><span class="hljs-keyword" data-reactid="795">int</span><!-- react-text: 796 -->)Math.sqrt((r0-r3)*(r0-r3)+(r1-r2)*(r1-r2));

            g0 = cm.getGreen(px[i+j*iw]);
            g1 = cm.getGreen(px[i+(j+<!-- /react-text --><span class="hljs-number" data-reactid="797">1</span><!-- react-text: 798 -->)*iw]);
            g2 = cm.getGreen(px[i+<!-- /react-text --><span class="hljs-number" data-reactid="799">1</span><!-- react-text: 800 -->+j*iw]);
            g3 = cm.getGreen(px[i+<!-- /react-text --><span class="hljs-number" data-reactid="801">1</span><!-- react-text: 802 -->+(j+<!-- /react-text --><span class="hljs-number" data-reactid="803">1</span><!-- react-text: 804 -->)*iw]);
            g = (<!-- /react-text --><span class="hljs-keyword" data-reactid="805">int</span><!-- react-text: 806 -->)Math.sqrt((g0-g3)*(g0-g3)+(g1-g2)*(g1-g2));

            b0 = cm.getBlue(px[i+j*iw]);
            b1 = cm.getBlue(px[i+(j+<!-- /react-text --><span class="hljs-number" data-reactid="807">1</span><!-- react-text: 808 -->)*iw]);
            b2 = cm.getBlue(px[i+<!-- /react-text --><span class="hljs-number" data-reactid="809">1</span><!-- react-text: 810 -->+j*iw]);
            b3 = cm.getBlue(px[i+<!-- /react-text --><span class="hljs-number" data-reactid="811">1</span><!-- react-text: 812 -->+(j+<!-- /react-text --><span class="hljs-number" data-reactid="813">1</span><!-- react-text: 814 -->)*iw]);
            b = (<!-- /react-text --><span class="hljs-keyword" data-reactid="815">int</span><!-- react-text: 816 -->)Math.sqrt((b0-b3)*(b0-b3)+(b1-b2)*(b1-b2));
            <!-- /react-text --><span class="hljs-keyword" data-reactid="817">if</span><!-- react-text: 818 -->(flag)
            {
                <!-- /react-text --><span class="hljs-keyword" data-reactid="819">if</span><!-- react-text: 820 -->(r &gt; thresh) r = <!-- /react-text --><span class="hljs-number" data-reactid="821">0</span><!-- react-text: 822 -->;<!-- /react-text --><span class="hljs-comment" data-reactid="823">//黑色，边缘点</span><!-- react-text: 824 -->
                <!-- /react-text --><span class="hljs-keyword" data-reactid="825">else</span><!-- react-text: 826 --> r = <!-- /react-text --><span class="hljs-number" data-reactid="827">255</span><!-- react-text: 828 -->;
                px[i+j*iw] = (<!-- /react-text --><span class="hljs-number" data-reactid="829">255</span><!-- react-text: 830 -->&lt;&lt;<!-- /react-text --><span class="hljs-number" data-reactid="831">24</span><!-- react-text: 832 -->)|(r&lt;&lt;<!-- /react-text --><span class="hljs-number" data-reactid="833">16</span><!-- react-text: 834 -->)|(r&lt;&lt;<!-- /react-text --><span class="hljs-number" data-reactid="835">8</span><!-- react-text: 836 -->)|r;
            }
            <!-- /react-text --><span class="hljs-keyword" data-reactid="837">else</span><!-- react-text: 838 -->
                px[i+j*iw] = (<!-- /react-text --><span class="hljs-number" data-reactid="839">255</span><!-- react-text: 840 -->&lt;&lt;<!-- /react-text --><span class="hljs-number" data-reactid="841">24</span><!-- react-text: 842 -->)|(r&lt;&lt;<!-- /react-text --><span class="hljs-number" data-reactid="843">16</span><!-- react-text: 844 -->)|(g&lt;&lt;<!-- /react-text --><span class="hljs-number" data-reactid="845">8</span><!-- react-text: 846 -->)|b;
        }
    }
    <!-- /react-text --><span class="hljs-keyword" data-reactid="847">return</span><!-- react-text: 848 --> px;
}<!-- /react-text --></code></pre></li></ul><h2 id="其他" data-reactid="849"><a href="#%E5%85%B6%E4%BB%96" aria-hidden="true" data-reactid="850"><span class="icon icon-link" data-reactid="851"></span></a><!-- react-text: 852 -->其他<!-- /react-text --></h2><ol data-reactid="853"><li data-reactid="854"><p data-reactid="855">清空画板</p></li><li data-reactid="856"><p data-reactid="857">选择图片下载</p></li><li data-reactid="858"><p data-reactid="859">画板图片下载</p></li><li data-reactid="860"><p data-reactid="861">添加文字</p></li><li data-reactid="862"><p data-reactid="863">图形绘制，图形拖拽，图形填充</p></li></ol><h1 id="参考资料" data-reactid="864"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" aria-hidden="true" data-reactid="865"><span class="icon icon-link" data-reactid="866"></span></a><!-- react-text: 867 -->参考资料<!-- /react-text --></h1><ul data-reactid="868"><li data-reactid="869">数字图像处理——Java编程与实验 （孙燮华著）</li></ul></article></div><div class="gitment-container" data-reactid="870"></div><div class="paginator" data-reactid="871"><a title="「思科模拟器」建立DNS+HTTP服务" class="prev" href="/make-dns-http" data-reactid="872">Prev</a><a title="「图像处理」图像的复原" class="next" href="/img-recover" data-reactid="873">Next</a></div></div></main><footer data-reactid="874"><div class="copyright" data-reactid="875"><p data-reactid="876"><!-- react-text: 877 -->© 2017. Powered By <!-- /react-text --><a href="https://github.com/picidaejs/picidae" data-reactid="878">Picidae</a></p></div></footer></div>
</div>
<audio id="music" controls autoplay src="http://www.170mv.com/kw/other.web.ri01.sycdn.kuwo.cn/resource/n3/25/67/3891786006.mp3"></audio>
<script>
  !function () {
    var a = document.getElementById("music")
    a && (a.volume = 1)
  }()
</script>
<script src="/PICIDAE_COMMON.js"></script>
<script src="/PICIDAE_ENTRY.js"></script>
</body>
</html>
