<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/favicon.png" />
    <title> 为你的博客添加搜索功能吧! - Grass </title>
    <link rel="stylesheet" href="/style.css">
    <style>
        #music {
            position: fixed;
            top: 10px;
            left: 10px;
        }
    </style>
</head>
<body>
<div id="root">
    <div class="wrap" data-reactroot="" data-reactid="1" data-react-checksum="1798707336"><header data-reactid="2"><a class="logo-link" href="/" data-reactid="3"><img src="/favicon.png" data-reactid="4"/></a><ul class="nav nav-list" data-reactid="5"><li class="nav-list-item" data-reactid="6"><a class="nav-list-link" href="/posts/1" data-reactid="7">Posts</a></li></ul></header><main data-reactid="8"><div class="post" data-reactid="9"><article class="post-block" data-reactid="10"><h1 class="post-title" data-reactid="11">为你的博客添加搜索功能吧!</h1><div class="post-info" data-reactid="12"><time datetime="2016-08-06T23:15:42+00:00" data-reactid="13">Aug 6, 2016 11:15 PM</time></div></article><div class="post-content" data-reactid="14"><article data-reactid="15"><style data-reactid="16">.transformer-react-render{border:1px dashed #959da5;border-radius:5px;display:block}.transformer-react-render-container&gt;pre{max-height:400px;transition:all .2s ease}.transformer-react-render-container&gt;pre.focused{max-height:none;box-shadow:0 0 6px rgba(0,0,0,.2)}</style><h1 id="search-spider-blog" data-reactid="17"><a href="#search-spider-blog" aria-hidden="true" data-reactid="18"><span class="icon icon-link" data-reactid="19"></span></a><!-- react-text: 20 -->Search-Spider-Blog<!-- /react-text --></h1><p data-reactid="21"><!-- react-text: 22 -->提供个人博客文章搜索服务, 只需要配置个人博客地址, 载入博客数据, 开启Server服务, 即可开启文章搜索服务。 对<!-- /react-text --><code data-reactid="23">blogconfig.json</code><!-- react-text: 24 -->配置文件监控, 修改后服务及时地更新博客数据<!-- /react-text --></p><p data-reactid="25"><strong data-reactid="26">本人用的为Hexo Blog, 所以Hexo用户体验更佳</strong></p><p data-reactid="27"><a href="https://github.com/moyuyc/search-spider-blog" data-reactid="28">代码地址</a></p><h2 id="使用说明" data-reactid="29"><a href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" aria-hidden="true" data-reactid="30"><span class="icon icon-link" data-reactid="31"></span></a><!-- react-text: 32 -->使用说明<!-- /react-text --></h2><ul data-reactid="33"><li data-reactid="34"><p data-reactid="35">环境配置</p><pre data-reactid="36"><code class="hljs language-sh" data-query="{}" data-lang="sh" data-reactid="37"><span class="hljs-comment" data-reactid="38"># after clone &amp;&amp; cd</span><!-- react-text: 39 -->
npm i <!-- /react-text --></code></pre></li><li data-reactid="40"><p data-reactid="41"><!-- react-text: 42 -->对 <!-- /react-text --><code data-reactid="43">blogconfig.json</code><!-- react-text: 44 --> 进行配置（以我<!-- /react-text --><a href="http://moyuyc.github.io/" data-reactid="45">个人博客</a><!-- react-text: 46 -->为例）<!-- /react-text --></p><pre data-reactid="47"><code class="hljs language-text" data-query="{}" data-lang="text" data-reactid="48"><!-- react-text: 49 -->
{
    <!-- /react-text --><span class="hljs-string" data-reactid="50">&quot;url&quot;</span><!-- react-text: 51 -->: <!-- /react-text --><span class="hljs-string" data-reactid="52">&quot;http://moyuyc.github.io/&quot;</span><!-- react-text: 53 -->,   <!-- /react-text --><span class="hljs-regexp" data-reactid="54">//</span><!-- react-text: 55 -->blog url
    <!-- /react-text --><span class="hljs-string" data-reactid="56">&quot;mainPagePath&quot;</span><!-- react-text: 57 -->: <!-- /react-text --><span class="hljs-string" data-reactid="58">&quot;/archives/&quot;</span><!-- react-text: 59 -->,        <!-- /react-text --><span class="hljs-regexp" data-reactid="60">//</span><!-- react-text: 61 --> 所有文章页面（也就是第一页）
    <!-- /react-text --><span class="hljs-string" data-reactid="62">&quot;spiderConfig&quot;</span><!-- react-text: 63 -->: {
        <!-- /react-text --><span class="hljs-string" data-reactid="64">&quot;ArticleLinkEl&quot;</span><!-- react-text: 65 -->: <!-- /react-text --><span class="hljs-string" data-reactid="66">&quot;.post-title-link&quot;</span><!-- react-text: 67 -->, <!-- /react-text --><span class="hljs-regexp" data-reactid="68">//</span><!-- react-text: 69 --> 在<!-- /react-text --><span class="hljs-string" data-reactid="70">&quot;mainPagePath&quot;</span><!-- react-text: 71 -->中进入文章页面的超链接jQuery选择器
        <!-- /react-text --><span class="hljs-string" data-reactid="72">&quot;splitPagePath&quot;</span><!-- react-text: 73 -->: <!-- /react-text --><span class="hljs-string" data-reactid="74">&quot;/archives/page/${page}/&quot;</span><!-- react-text: 75 -->, <!-- /react-text --><span class="hljs-regexp" data-reactid="76">//</span><!-- react-text: 77 --> 所有文章分页的规则, <!-- /react-text --><span class="hljs-variable" data-reactid="78">${page}</span><!-- react-text: 79 -->表示页码
        <!-- /react-text --><span class="hljs-string" data-reactid="80">&quot;ArticleDateEl&quot;</span><!-- react-text: 81 -->: <!-- /react-text --><span class="hljs-string" data-reactid="82">&quot;time&quot;</span><!-- react-text: 83 -->,         <!-- /react-text --><span class="hljs-regexp" data-reactid="84">//</span><!-- react-text: 85 --> 在文章页面中日期的Jquery选择器
        <!-- /react-text --><span class="hljs-string" data-reactid="86">&quot;ArticleTitleEl&quot;</span><!-- react-text: 87 -->: <!-- /react-text --><span class="hljs-string" data-reactid="88">&quot;.post-title&quot;</span><!-- react-text: 89 -->, <!-- /react-text --><span class="hljs-regexp" data-reactid="90">//</span><!-- react-text: 91 --> 在文章页面中标题的Jquery选择器
        <!-- /react-text --><span class="hljs-string" data-reactid="92">&quot;ArticleContentEl&quot;</span><!-- react-text: 93 -->: <!-- /react-text --><span class="hljs-string" data-reactid="94">&quot;.post-body&quot;</span><!-- react-text: 95 --> <!-- /react-text --><span class="hljs-regexp" data-reactid="96">//</span><!-- react-text: 97 --> 在文章页面中内容的Jquery选择器
    }
}<!-- /react-text --></code></pre></li><li data-reactid="98"><p data-reactid="99">脚本指令说明</p><pre data-reactid="100"><code class="hljs language-sh" data-query="{}" data-lang="sh" data-reactid="101"><!-- react-text: 102 -->    
npm start <!-- /react-text --><span class="hljs-comment" data-reactid="103"># 开启Server服务(默认端口7899, 可在scripts中修改), 开启后会自动更新一次数据</span><!-- react-text: 104 -->
npm load  <!-- /react-text --><span class="hljs-comment" data-reactid="105"># 更新博客数据</span></code></pre></li><li data-reactid="106"><p data-reactid="107">Server接口说明</p><ol data-reactid="108"><li data-reactid="109"><p data-reactid="110"><code data-reactid="111">/load</code><!-- react-text: 112 --> : 重新加载博客数据<!-- /react-text --></p></li><li data-reactid="113"><p data-reactid="114"><code data-reactid="115">/api/search/(:type)</code><!-- react-text: 116 --> : type可选值为<!-- /react-text --><code data-reactid="117">date/content/title/all</code><!-- react-text: 118 -->, 根据什么来搜索, 参数格式为<!-- /react-text --><code data-reactid="119">?q=想搜什么&amp;n=数目(可选)</code></p></li><li data-reactid="120"><p data-reactid="121"><code data-reactid="122">/api/search/all</code><!-- react-text: 123 --> : 当未传<!-- /react-text --><code data-reactid="124">q</code><!-- react-text: 125 -->时, 返回所有文章<!-- /react-text --></p></li><li data-reactid="126"><p data-reactid="127">2 3点中的返回数据说明 :</p><pre data-reactid="128"><code class="hljs language-text" data-query="{}" data-lang="text" data-reactid="129"><!-- react-text: 130 -->{
    <!-- /react-text --><span class="hljs-attribute" data-reactid="131">type</span><!-- react-text: 132 -->: <!-- /react-text --><span class="hljs-string" data-reactid="133">&#x27;title/date/content&#x27;</span><!-- react-text: 134 -->,
    <!-- /react-text --><span class="hljs-attribute" data-reactid="135">articles</span><!-- react-text: 136 -->: [ <!-- /react-text --><span class="hljs-comment" data-reactid="137">// 一般length为1</span><!-- react-text: 138 -->
        {
            <!-- /react-text --><span class="hljs-attribute" data-reactid="139">title</span><!-- react-text: 140 -->: <!-- /react-text --><span class="hljs-string" data-reactid="141">&#x27;title&#x27;</span><!-- react-text: 142 -->,
            <!-- /react-text --><span class="hljs-attribute" data-reactid="143">datetime</span><!-- react-text: 144 -->: <!-- /react-text --><span class="hljs-string" data-reactid="145">&#x27;date&#x27;</span><!-- react-text: 146 -->,
            <!-- /react-text --><span class="hljs-attribute" data-reactid="147">content</span><!-- react-text: 148 -->: <!-- /react-text --><span class="hljs-string" data-reactid="149">&#x27;content&#x27;</span><!-- react-text: 150 -->,
            <!-- /react-text --><span class="hljs-attribute" data-reactid="151">path</span><!-- react-text: 152 -->: <!-- /react-text --><span class="hljs-string" data-reactid="153">&#x27;/url&#x27;</span><!-- react-text: 154 -->   <!-- /react-text --><span class="hljs-comment" data-reactid="155">// 文章链接地址 相对的</span><!-- react-text: 156 -->
        }
    ],
    <!-- /react-text --><span class="hljs-attribute" data-reactid="157">indexs</span><!-- react-text: 158 -->: [] <!-- /react-text --><span class="hljs-comment" data-reactid="159">// 搜索到内容的索引位置</span><!-- react-text: 160 -->
}<!-- /react-text --></code></pre></li><li data-reactid="161"><p data-reactid="162"><!-- react-text: 163 -->注意: 提供了多关键词的搜索, 如<!-- /react-text --><code data-reactid="164">keyword1+keyword2</code><!-- react-text: 165 --> 或者 <!-- /react-text --><code data-reactid="166">keyword1 keyword2</code></p></li><li data-reactid="167"><p data-reactid="168"><!-- react-text: 169 -->可以根据自己的需求, 直接使用 <!-- /react-text --><code data-reactid="170">/api/search/all</code><!-- react-text: 171 --> 所有数据做为静态数据进行本地搜索, 或者使用search服务都可<!-- /react-text --></p></li></ol></li></ul><h2 id="工作流程" data-reactid="172"><a href="#%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B" aria-hidden="true" data-reactid="173"><span class="icon icon-link" data-reactid="174"></span></a><!-- react-text: 175 -->工作流程<!-- /react-text --></h2><ol data-reactid="176"><li data-reactid="177"><!-- react-text: 178 -->爬取博客文章数据, 保存至<!-- /react-text --><code data-reactid="179">db.json</code><!-- react-text: 180 -->中, 未使用数据库, 是为了轻量与方便移植, 而且只是提供个人服务<!-- /react-text --></li><li data-reactid="181"><!-- react-text: 182 -->为了更好的拓展性, 使用<!-- /react-text --><code data-reactid="183">cheerio</code><!-- react-text: 184 -->, 使用<!-- /react-text --><code data-reactid="185">jQuery选择器</code><!-- react-text: 186 --> 配置即可<!-- /react-text --></li><li data-reactid="187"><!-- react-text: 188 -->获取数据后, 便是搭建<!-- /react-text --><code data-reactid="189">http服务</code><!-- react-text: 190 -->, 提供搜索接口, 为了方便用户展示, 还提供了搜索到内容的索引位置<!-- /react-text --></li></ol><h2 id="效果查看" data-reactid="191"><a href="#%E6%95%88%E6%9E%9C%E6%9F%A5%E7%9C%8B" aria-hidden="true" data-reactid="192"><span class="icon icon-link" data-reactid="193"></span></a><!-- react-text: 194 -->效果查看<!-- /react-text --></h2><div data-reactid="195"><style data-reactid="196">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:864px;max-height:864pxpx;" data-reactid="197"><div class="medium-image-progressive-placeholder" style="padding-bottom:79.62962962962963%;" data-reactid="198"></div><div class="medium-image-progressive" data-reactid="199"><canvas data-reactid="200"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="201"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FiR3acOCoX2AYv7FSSnpEPfYXEOs?imageslim" data-reactid="202"/><noscript data-reactid="203"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FiR3acOCoX2AYv7FSSnpEPfYXEOs?imageslim" data-reactid="204"/></noscript></div></div></div><!-- react-text: 205 --> <!-- /react-text --><div data-reactid="206"><style data-reactid="207">
.medium-image-progressive-container {
  position: relative;
  width: 100%;
  margin: 0 auto;
  margin-top: 43px;
  display: block;
}
.image-loaded.medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-transition: visibility 0s linear .5s,opacity .1s .4s;
  transition: visibility 0s linear .5s,opacity .1s .4s;
}
.image-loaded.medium-image-progressive .medium-image-origin {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-progressive:not(.image-loaded):not(.canvas-loaded) {
  background-color: rgba(0, 0, 0, 0.05);
}
.medium-image-progressive-container .medium-image-progressive {
  position: absolute;
  top:0;left:0;width:100%;height:100%;
  max-width: 100%;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.medium-image-progressive-container img, .medium-image-progressive-container canvas {
  margin: 0 auto;
}
.medium-image-progressive-container .canvas-loaded.medium-image-progressive:not(.image-loaded) canvas {
  visibility: visible;
  opacity: 1;
  -webkit-transition: visibility 0s linear 0s,opacity .4s 0s;
  transition: visibility 0s linear 0s,opacity .4s 0s;
}
.medium-image-progressive-container .medium-image-origin,
.medium-image-progressive-container .medium-image-progressive canvas {
  visibility: hidden;
  opacity: 0;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
</style><div class="medium-image-progressive-container" style="max-width:733px;max-height:733pxpx;" data-reactid="208"><div class="medium-image-progressive-placeholder" style="padding-bottom:83.62892223738064%;" data-reactid="209"></div><div class="medium-image-progressive" data-reactid="210"><canvas data-reactid="211"></canvas><img class="medium-image-progress" src="false" style="display:none;" data-reactid="212"/><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FoiPMH0e2DGk06Uw1olsMxeRBWfk?imageslim" data-reactid="213"/><noscript data-reactid="214"><img class="medium-image-origin" src="http://obu9je6ng.bkt.clouddn.com/FoiPMH0e2DGk06Uw1olsMxeRBWfk?imageslim" data-reactid="215"/></noscript></div></div></div></article></div><div class="gitment-container" data-reactid="216"></div><div class="paginator" data-reactid="217"><a title="探究SegumentFault Markdown编辑器" class="prev" href="/segumentfault-markdown-editor-and-mo-editor" data-reactid="218">Prev</a><a title="数字验证码识别" class="next" href="/number-code-verify" data-reactid="219">Next</a></div></div></main><footer data-reactid="220"><div class="copyright" data-reactid="221"><p data-reactid="222"><!-- react-text: 223 -->© 2017. Powered By <!-- /react-text --><a href="https://github.com/picidaejs/picidae" data-reactid="224">Picidae</a></p></div></footer></div>
</div>
<audio id="music" controls autoplay src="http://www.170mv.com/kw/other.web.ri01.sycdn.kuwo.cn/resource/n3/25/67/3891786006.mp3"></audio>
<script>
  !function () {
    var a = document.getElementById("music")
    a && (a.volume = 1)
  }()
</script>
<script src="/PICIDAE_COMMON.js"></script>
<script src="/PICIDAE_ENTRY.js"></script>
</body>
</html>
